<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <link rel="stylesheet" href="../bower_components/jqcloud2/dist/jqcloud.min.css">

    <style>
        html, body {
            width: 100%;
            height: 100%;
            margin: 0;
            padding: 0;
        }

        #cloud-dynamic {
            width: 80%;
            height: 400px;
        }
    </style>    
</head>
<body ng-app="app" ng-controller="controller">
    
    <jqcloud words="words" id="cloud-dynamic" auto-resize="true" steps="7" ></jqcloud>
    <script src="../bower_components/jquery/dist/jquery.min.js"></script>
    <script src="../bower_components/jqcloud2/dist/jqcloud.min.js"></script>
    <script src="../bower_components/angular/angular.min.js"></script>
    <script src="../bower_components/angular-jqcloud/angular-jqcloud.js"></script>
    <script>

  var app = angular.module('app', [
    'angular-jqcloud'
  ]);

  app.controller('controller', function ($scope, $http) {
      //$scope.moods = null;
      $http.get('http://localhost:53154//api/moods').
          success(function (response) {
              $scope.moods = response;
              $scope.words = [];

              var happycounter = $scope.moods[0].Counter;              
              for (var i = 0; i < happycounter; i++) {
                  $scope.words.push({ text: "Happy", weight: i });
              }

              var sadcounter = $scope.moods[1].Counter;
              for (var i = 0; i < sadcounter; i++) {
                  $scope.words.push({ text: "Sad", weight: i });
              }
          });

    $scope.update = function() {
      $scope.words.splice(-5);
    };
  });
    </script>
</body>
</html>